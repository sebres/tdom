# -*- tcl -*-
#
# This file contains benchmarks for DOM doc creation with dom and tdom
#
# (c) 2018 Rolf Ade <rolf@pointsman.de>
#


# ### ### ### ######### ######### ######### ###########################
## Setting up the environment ...

package require tdom 

# ### ### ### ######### ######### ######### ###########################
## Benchmarks.


bench -desc "dom mondial-europe.xml" -iters 5 -body {
    set fd [open ../tests/data/mondial-europe.xml]
    set doc [dom parse -channel $fd]
    close $fd
    $doc delete
}

bench -desc "tdom mondial-europe.xml" -iters 5 -body {
    set p [expat]
    tdom $p enable
    $p parsefile ../tests/data/mondial-europe.xml
    set doc [tdom $p getdoc]
    $doc delete
}

bench -desc "dom REC-xslt-19991116.xml" -iters 5 -body {
    set fd [open ../tests/data/REC-xslt-19991116.xml]
    set doc [dom parse -channel $fd]
    close $fd
    $doc delete
}

bench -desc "tdom REC-xslt-19991116.xmlmondial-europe.xml" -iters 5 -body {
    set p [expat]
    tdom $p enable
    $p parsefile ../tests/data/REC-xslt-19991116.xml
    set doc [tdom $p getdoc]
    $doc delete
}
